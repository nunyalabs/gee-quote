const CACHE_NAME="quote-bank-v2.0",STATIC_CACHE="quote-static-v2.0",RUNTIME_CACHE="quote-runtime-v2.0",STATIC_ASSETS=["./","./index.html","./styles.css","./app.js","./manifest.json"],CDN_ASSETS=["https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css","https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.1/font/bootstrap-icons.css","https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"];self.addEventListener("install",t=>{t.waitUntil(Promise.all([caches.open(STATIC_CACHE).then(t=>(console.log("Caching static assets"),t.addAll(STATIC_ASSETS))),caches.open(RUNTIME_CACHE).then(t=>(console.log("Caching CDN assets"),t.addAll(CDN_ASSETS)))]).then(()=>{console.log("Service worker installed"),self.skipWaiting()}))}),self.addEventListener("activate",t=>{t.waitUntil(caches.keys().then(t=>Promise.all(t.filter(t=>t!==STATIC_CACHE&&t!==RUNTIME_CACHE&&t.startsWith("quote-")).map(t=>(console.log("Deleting old cache:",t),caches.delete(t))))).then(()=>(console.log("Service worker activated"),self.clients.claim())))}),self.addEventListener("fetch",t=>{const{request:e}=t,n=new URL(e.url);"navigate"!==e.mode?"https://cdn.jsdelivr.net"!==n.origin?t.respondWith(caches.match(e).then(t=>t||fetch(e).then(t=>{if(!t||200!==t.status||"basic"!==t.type)return t;const n=t.clone();return caches.open(RUNTIME_CACHE).then(t=>{t.put(e,n)}),t}).catch(()=>{if("document"===e.destination)return caches.match("./index.html")}))):t.respondWith(caches.match(e).then(t=>t||fetch(e).then(t=>{if(t.ok){const n=t.clone();caches.open(RUNTIME_CACHE).then(t=>{t.put(e,n)})}return t}))):t.respondWith(caches.match("./index.html").then(t=>t||fetch(e)))}),self.addEventListener("sync",t=>{"background-sync"===t.tag&&console.log("Background sync triggered")}),self.addEventListener("push",t=>{if(t.data){const e=t.data.json(),n={body:e.body,icon:"./icon-192.png",badge:"./icon-192.png"};t.waitUntil(self.registration.showNotification(e.title,n))}}),self.addEventListener("notificationclick",t=>{t.notification.close(),t.waitUntil(clients.openWindow("./"))});